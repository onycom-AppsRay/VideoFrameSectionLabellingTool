<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
  <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>

<body>
  <div class="file-controls">
    <button id="select-directory">file open</button>
    <span id="selected-file"></span>
  </div>
  
  <div style="max-width: 550px">
    <canvas id="input"></canvas>
  </div>

  <script src="./renderer-process/open-file.js"></script>
  <script>
    let cv = require('opencv4nodejs')
    let path = require('path')
    
    let selectedImgBGR = cv.imread(path.resolve('assets', 'got.jpg')).resizeToMax(500)
    let selectedImg = selectedImgBGR

    renderImage(selectedImgBGR, document.getElementById('input'));

    function onImageSelected(e) {
      selectedFile = e.target.files[0];
      console.log(selectedFile)

      var reader = new FileReader();
      reader.onload = function(re) {
        selectedImgBGR = decodeImageFromBase64(re.target.result).resizeToMax(500);
        selectedImg = selectedImgBGR;
        renderImage(
          selectedImg,
          document.getElementById('input')
        );
        renderRangeMask();
      };
      reader.readAsDataURL(selectedFile);
    }

  </script>
</body>

</html>